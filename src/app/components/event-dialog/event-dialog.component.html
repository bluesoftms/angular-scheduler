<div class="dialog-backdrop" (click)="onCancel()">
  <div class="dialog-container" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h2>{{ event ? 'Edit Event' : 'New Event' }}</h2>
      <button class="close-btn" (click)="onCancel()">Ã—</button>
    </div>
    
    <form (ngSubmit)="onSubmit()" #eventForm="ngForm">
      <div class="dialog-content">
        <div class="form-group">
          <label for="title">Title *</label>
          <input 
            id="title" 
            type="text" 
            [(ngModel)]="formData.title" 
            name="title" 
            required
            placeholder="Add title">
        </div>

        <div class="form-group">
          <label for="allDay">
            <input 
              id="allDay" 
              type="checkbox" 
              [(ngModel)]="formData.allDay" 
              name="allDay">
            All day
          </label>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="startDate">Start date</label>
            <input 
              id="startDate" 
              type="date" 
              [(ngModel)]="formData.startDate" 
              name="startDate" 
              required>
          </div>
          @if (!formData.allDay) {
            <div class="form-group">
              <label for="startTime">Start time</label>
              <input 
                id="startTime" 
                type="time" 
                [(ngModel)]="formData.startTime" 
                name="startTime" 
                required>
            </div>
          }
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="endDate">End date</label>
            <input 
              id="endDate" 
              type="date" 
              [(ngModel)]="formData.endDate" 
              name="endDate" 
              required>
          </div>
          @if (!formData.allDay) {
            <div class="form-group">
              <label for="endTime">End time</label>
              <input 
                id="endTime" 
                type="time" 
                [(ngModel)]="formData.endTime" 
                name="endTime" 
                required>
            </div>
          }
        </div>

        <div class="form-group">
          <label for="location">Location</label>
          <input 
            id="location" 
            type="text" 
            [(ngModel)]="formData.location" 
            name="location"
            placeholder="Add location">
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea 
            id="description" 
            [(ngModel)]="formData.description" 
            name="description"
            rows="3"
            placeholder="Add description"></textarea>
        </div>

        <div class="form-group">
          <label>Color</label>
          <div class="color-picker">
            @for (color of colors; track color) {
              <button 
                type="button"
                class="color-option" 
                [style.backgroundColor]="color"
                [class.selected]="formData.color === color"
                (click)="formData.color = color">
              </button>
            }
          </div>
        </div>
      </div>

      <div class="dialog-footer">
        @if (event) {
          <button type="button" class="btn btn-danger" (click)="onDelete()">Delete</button>
        }
        <div class="footer-right">
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
          <button type="submit" class="btn btn-primary" [disabled]="!eventForm.valid">Save</button>
        </div>
      </div>
    </form>
  </div>
</div>